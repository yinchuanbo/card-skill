# 山水卡片学习系统部署检查清单

使用此清单确保您的山水卡片学习系统已准备好部署到 Vercel。

## 准备工作

### 代码仓库检查

- [ ] 代码已推送到 GitHub 仓库
- [ ] 代码可在本地环境正常运行
- [ ] 所有敏感信息（如 API 密钥）已移到环境变量
- [ ] README.md 文件已更新，包含项目描述和使用说明

### 文件结构检查

- [ ] 确认项目包含必要的配置文件：
  - [ ] `package.json` - 包含所有依赖和正确的脚本
  - [ ] `server.js` - Express 应用程序入口点
  - [ ] `vercel.json` - Vercel 特定的配置
- [ ] 静态资源（CSS、JS、图片）位于适当的目录中
- [ ] 所有必要的依赖都已列在`package.json`中

### 项目配置检查

- [ ] `package.json`中的脚本部分包含正确的启动命令
  ```json
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  }
  ```
- [ ] `vercel.json`配置正确，包含适当的构建设置和路由规则
  ```json
  {
    "version": 2,
    "builds": [
      { "src": "server.js", "use": "@vercel/node" },
      { "src": "public/**", "use": "@vercel/static" }
    ],
    "routes": [
      { "src": "/css/(.*)", "dest": "/public/css/$1" },
      { "src": "/js/(.*)", "dest": "/public/js/$1" },
      { "src": "/images/(.*)", "dest": "/public/images/$1" },
      { "src": "/(.*).(js|css|png|jpg|gif|svg|ico)$", "dest": "/public/$1.$2" },
      { "src": "/(.*)", "dest": "/server.js" }
    ]
  }
  ```
- [ ] `server.js`已适配 Vercel 环境，包含正确的导出

  ```javascript
  // ... 其他代码 ...

  // 本地开发使用
  if (process.env.NODE_ENV !== "production") {
    app.listen(port, () => {
      console.log(`服务器运行在 http://localhost:${port}`);
    });
  }

  // 为Vercel导出
  module.exports = app;
  ```

## 内容检查

### Markdown 文件

- [ ] 所有 Markdown 文件格式正确，包含必要的前置信息
- [ ] 检查文件中的链接是否正确（相对或绝对路径）
- [ ] 确认所有引用的图片都存在且路径正确

### 图片和媒体

- [ ] 所有图像已优化（压缩，适当大小）
- [ ] 图像格式适合网络（考虑使用 WebP 或其他现代格式）
- [ ] 所有媒体文件大小合理，不会影响加载性能

### 功能测试

- [ ] 卡片显示功能正常工作
- [ ] 搜索功能正常运行
- [ ] 标签过滤功能有效
- [ ] 主题切换（如有）工作正常
- [ ] 响应式设计在不同屏幕尺寸下正常显示

## 性能优化

### 前端优化

- [ ] CSS 和 JavaScript 文件已压缩
- [ ] 图片已使用适当的尺寸和格式
- [ ] 实施懒加载策略（适用于图像或组件）
- [ ] 减少不必要的 JavaScript 库和依赖

### 后端优化

- [ ] 实施适当的缓存策略
- [ ] 优化 API 响应时间
- [ ] 确保 Markdown 到 HTML 的转换过程高效

## 安全检查

### 基本安全

- [ ] 所有敏感数据都使用环境变量
- [ ] 不存在硬编码的凭据或 API 密钥
- [ ] 确保没有不必要的暴露服务或端口

### 数据保护

- [ ] 如果处理用户数据，确保遵循数据保护最佳实践
- [ ] 确保没有敏感信息泄露到客户端

## Vercel 部署准备

### 账户设置

- [ ] 已创建 Vercel 账户
- [ ] 已将 GitHub 账户与 Vercel 关联

### 环境变量

- [ ] 列出需要在 Vercel 中设置的所有环境变量
  - [ ] NODE_ENV (应设置为'production')
  - [ ] 其他项目特定的环境变量

### 域名设置 (可选)

- [ ] 如使用自定义域名，已获取域名
- [ ] 了解如何在 Vercel 中配置域名
- [ ] 已准备好必要的 DNS 记录信息

## 部署后检查

### 功能验证

- [ ] 访问部署后的网站，确认所有页面加载正常
- [ ] 测试所有功能，确保与本地环境行为一致
- [ ] 检查控制台是否有错误或警告

### 性能验证

- [ ] 使用 Lighthouse 或类似工具分析网站性能
- [ ] 检查加载时间和响应速度
- [ ] 验证移动设备上的性能

### 可访问性

- [ ] 确保网站在各种设备和浏览器上正常工作
- [ ] 验证基本的可访问性标准

## 持续集成/部署 (可选)

### 自动化部署

- [ ] 确认从 GitHub 到 Vercel 的自动部署工作正常
- [ ] 测试推送更改后的自动部署流程

### 监控

- [ ] 设置基本的监控（如可用性检查）
- [ ] 考虑集成错误跟踪工具（如 Sentry）

## 最终检查

- [ ] 完成此清单上的所有项目
- [ ] 记录任何未解决的问题或注意事项
- [ ] 确认团队成员了解部署流程和责任

---

**部署日期**: **\*\***\_**\*\***

**部署负责人**: **\*\***\_**\*\***

**备注**: **************\*\*\*\***************\_**************\*\*\*\***************
